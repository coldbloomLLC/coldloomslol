<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <meta name="description" content="Cold Looms — Smart Outreach for Real Clients. Get matched with vetted pros instantly." />
  <meta name="theme-color" content="#fff" />
  <title>Cold Looms | Smart Outreach for Real Clients</title>
  <link rel="icon" href="https://i.ibb.co/h1Fv6dzj/NEWLOGOLOL.png" type="image/png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://i.ibb.co/h1Fv6dzj/NEWLOGOLOL.png">
  <link rel="manifest" href="manifest.json" />
  <meta property="og:title" content="Cold Looms | Smart Outreach for Real Clients" />
  <meta property="og:description" content="Get matched with vetted pros instantly. Cold Looms makes finding help easy." />
  <meta property="og:image" content="https://i.ibb.co/h1Fv6dzj/NEWLOGOLOL.png" />
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Cold Looms | Smart Outreach for Real Clients">
  <meta name="twitter:description" content="Get matched with vetted pros instantly. Cold Looms makes finding help easy.">
  <meta name="twitter:image" content="https://i.ibb.co/h1Fv6dzj/NEWLOGOLOL.png">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #00796b;
      --primary-dark: #045c52;
      --accent: #e0f2f1;
      --bg: #fff;
      --text: #1a232b;
      --text-dim: #556;
      --card: #fff;
      --radius: 18px;
      --shadow: 0 8px 50px 0 rgba(14,226,184,0.08);
      --mono: 'JetBrains Mono', monospace;
      --sans: 'Inter', 'Segoe UI', Arial, sans-serif;
    }
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      min-height: 100vh;
      font-family: var(--sans);
      background: var(--bg);
      color: var(--text);
      overflow-x: hidden;
    }
    *, *::before, *::after { box-sizing: border-box; }
    a { color: var(--primary-dark); text-decoration: none; }
    img { max-width: 100%; border-radius: var(--radius); }
    .skip-link {
      position: absolute; left: -999px; top: auto; width: 1px; height: 1px; overflow: hidden;
      background: var(--primary); color: #fff; z-index: 1000; transition: left .2s;
    }
    .skip-link:focus {left: 24px; top: 18px; width:auto; height:auto; padding:0.8em 1.2em; border-radius:6px;outline:2px solid var(--primary-dark);}
    .navbar {
      background: #fff;
      box-shadow: 0 1px 5px rgba(0,0,0,0.06);
      width: 100%;
      position: sticky; top: 0; z-index: 20;
      padding-top: env(safe-area-inset-top);
    }
    .nav-content {
      max-width: 1200px; margin: auto;
      display: flex; justify-content: space-between; align-items: center;
      padding: 1.35rem 2rem 1.15rem 2rem;
    }
    .nav-logo {
      display: flex; align-items: center; gap: 0.8rem;
      font-family: var(--mono); font-size: 1.35rem; font-weight: 800;
      color: var(--primary); letter-spacing: -0.015em;
      user-select: none;
      transition: color .18s;
    }
    .nav-logo img {height: 36px; border-radius: 9px;}
    .nav-links {display: flex; gap: 1.5rem; align-items: center;}
    .nav-link, .nav-signin {
      font-size: 1.04rem; letter-spacing: 0.01em; font-family: var(--mono);
      padding: 0.45em 1.1em; border-radius: 8px;
      background: none; border: none; color: var(--text-dim);
      transition: background .18s,color .15s,box-shadow .18s;
      outline: none;
    }
    .nav-link:hover, .nav-link:focus {background: var(--accent); color: var(--primary-dark);}
    .nav-signin {
      background: var(--primary); color: #fff; font-weight: 700; border: none;
      box-shadow: 0 2px 18px #0ee2b822; cursor: pointer;
      transition: background .13s, color .13s, box-shadow .16s;
      min-width: 44px; min-height: 44px;
    }
    .nav-signin:hover, .nav-signin:focus {background: var(--primary-dark);}
    .nav-mobile-toggle {
      display: none;
      background: none;
      border: none;
      font-size: 2.2rem;
      color: var(--primary-dark);
      margin-left: 1rem;
      cursor: pointer;
      z-index: 30;
    }
    @media (max-width: 700px) {
      .nav-content {flex-direction: row; padding: 1.1rem 1rem;}
      .nav-logo {font-size: 1.05rem;}
      .nav-links {
        position: fixed;
        top: 62px;
        left: 0;
        width: 100vw;
        background: #fff;
        box-shadow: 0 2px 18px #00796b10;
        flex-direction: column;
        align-items: stretch;
        gap: 0;
        padding: 0;
        margin: 0;
        display: none;
        z-index: 999;
      }
      .nav-links.show { display: flex; }
      .nav-link, .nav-signin {
        width: 100%;
        border-radius: 0;
        margin: 0;
        padding: 1.15em 0;
        font-size: 1.11rem;
        text-align: left;
        border-bottom: 1px solid #e0f2f1;
      }
      .nav-signin {
        background: var(--primary);
        color: #fff;
        font-weight: 700;
        border: none;
        box-shadow: 0 2px 18px #0ee2b822;
        cursor: pointer;
        border-radius: 0 0 8px 8px;
        margin-bottom: 0;
      }
      .nav-mobile-toggle { display: block; }
    }

    /* HERO SECTION (HALF/HALF SPLIT) */
    .hero-container {
      display: flex;
      align-items: stretch;
      min-height: 74vh;
      width: 100%;
      max-width: 1400px;
      margin: 2.7rem auto 2rem auto;
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 8px 50px 0 rgba(14,226,184,0.08);
      overflow: hidden;
      position: relative;
      border: 2px solid #e0f2f1;
    }
    .hero-left,
    .hero-right {
      flex: 1 1 50%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
      padding: 4.5rem 3rem;
      min-width: 0;
      min-height: 400px;
      position: relative;
    }
    .hero-left {
      background: #fff;
      z-index: 2;
      align-items: flex-start;
      border-right: 1.5px solid #e0f2f1;
      justify-content: center;
    }
    .hero-title {
      font-size: 3.2rem;
      font-weight: 900;
      letter-spacing: -0.03em;
      color: #045c52;
      margin-bottom: 0.7rem;
      line-height: 1.07;
      text-shadow: 0 2px 12px #0ee2b810;
    }
    .hero-subtitle {
      font-size: 1.4rem;
      color: #00796b;
      margin: 1.1rem 0 2.5rem 0;
      font-weight: 600;
      max-width: 440px;
    }
    .hero-cta-btn {
      background: #00796b;
      color: #fff;
      font-size: 1.22rem;
      font-weight: 700;
      border: none;
      border-radius: 32px;
      padding: 1.13em 2.7em;
      margin-bottom: 2.1rem;
      box-shadow: 0 8px 32px #0ee2b824;
      transition: background .18s, transform .18s, box-shadow .17s;
      cursor: pointer;
      letter-spacing: 0.02em;
      outline: none;
      min-width: 44px;
      min-height: 44px;
      animation: pulse 2.3s infinite cubic-bezier(.4,1.2,.4,1);
    }
    .hero-cta-btn:hover, .hero-cta-btn:focus {
      background: #045c52;
      transform: translateY(-1px) scale(1.03);
    }
    .hero-local-tag {
      background: #00796b;
      color: #fff;
      font-family: 'JetBrains Mono', monospace;
      font-size: 1.01rem;
      letter-spacing: 0.02em;
      border-radius: 4px;
      padding: 0.18em 0.7em;
      margin-top: 1.2rem;
      display: inline-block;
      opacity: 0.92;
    }
    .hero-right {
      background: linear-gradient(120deg, #e0f2f1 15%, #fff 100%);
      align-items: center;
      justify-content: center;
      position: relative;
      z-index: 1;
      text-align: center;
      padding: 3rem 2rem;
      min-height: 400px;
      display: flex;
      flex-direction: column;
      border-left: none;
    }
    .hero-main-img {
      max-width: 400px;
      width: 95%;
      box-shadow: 0 10px 50px #0ee2b825;
      background: #f8f8f8;
      padding: 32px;
      border-radius: 50%;
      animation: logoGlow 2.5s infinite alternate cubic-bezier(0.4,1.2,0.4,1), float 3.9s ease-in-out infinite alternate;
    }
    @keyframes float {to{transform: translateY(-20px);}}
    @keyframes logoGlow {0%{filter:drop-shadow(0 0 0 #00796b)} 100%{filter:drop-shadow(0 0 22px #00796b)}}
    @keyframes pulse {
      0%,100% {box-shadow: 0 0 16px #0ee2b833;}
      60% {box-shadow: 0 0 40px #0ee2b844;}
    }
    @media (max-width: 1200px) {
      .hero-container {max-width: 98vw;}
      .hero-left, .hero-right {padding: 2.5rem 1.3rem;}
      .hero-title { font-size: 2.1rem;}
      .hero-main-img {max-width: 240px;padding:12px;}
    }
    @media (max-width: 900px) {
      .hero-title {font-size: 1.7rem;}
      .hero-main-img {max-width: 180px; padding:10px;}
      .hero-container {min-height: unset;}
      .hero-left, .hero-right {padding: 2rem 0.5rem;}
    }
    @media (max-width: 750px) {
      .hero-container {
        flex-direction: column;
        min-height: unset;
        margin-top: 1rem;
        margin-bottom: 1.2rem;
        border-radius: 18px;
        border: none;
      }
      .hero-left, .hero-right {
        flex: unset;
        width: 100%;
        min-width: 0;
        padding: 2rem 1rem 1.5rem 1rem;
        align-items: center;
        text-align: center;
        border: none !important;
      }
      .hero-title {font-size: 1.3rem;}
      .hero-subtitle {font-size: 1.07rem;}
      .hero-main-img {max-width: 120px; padding:6px;}
    }
    /* BELOW: Unchanged CSS for all other sections ... (services, process, testimonials, CTA, footer, popups, etc.) */
  </style>
</head>
<body>
<a href="#main-content" class="skip-link">Skip to main content</a>
<nav class="navbar" aria-label="Main Navigation">
  <div class="nav-content">
    <a href="index.html" class="nav-logo">
      <img src="https://i.ibb.co/h1Fv6dzj/NEWLOGOLOL.png" alt="Cold Looms Logo" loading="lazy" decoding="async" />
      Cold Looms
    </a>
    <button class="nav-mobile-toggle" aria-label="Open navigation" onclick="toggleMobileNav()">☰</button>
    <div class="nav-links" id="main-nav-links">
      <a href="LOL.html" target="_blank" rel="noopener noreferrer" class="nav-link">About Us</a>
      <a href="#contact" class="nav-link">Get Started</a>
      <a href="https://coldlooms.github.io/LOL/privacy.html" class="nav-link" rel="noopener noreferrer">Privacy</a>
      <a href="https://coldlooms.github.io/LOL/terms.html" class="nav-link" rel="noopener noreferrer">Terms</a>
      <button class="nav-signin" aria-haspopup="dialog" aria-controls="login-dialog" onclick="openDialog(event)">Sign In</button>
    </div>
  </div>
</nav>
<!-- HERO SECTION (half/half design) -->
<section class="hero-container" id="main-content">
  <div class="hero-left">
    <h1 class="hero-title">Real Pros. Right Near You.</h1>
    <p class="hero-subtitle">Cold Looms connects you to professionals in your area—fast and reliable.</p>
    <a href="#contact" class="hero-cta-btn">Get Started</a>
    <div class="hero-local-tag">Local Matching</div>
  </div>
  <div class="hero-right">
    <img src="https://i.ibb.co/h1Fv6dzj/NEWLOGOLOL.png" alt="Cold Looms Tech Logo" class="hero-main-img" loading="lazy" decoding="async" />
  </div>
</section>

<!-- SERVICES SECTION -->
<section class="services-section reveal">
  <h2>Popular services near <span id="user-city" style="color:var(--primary);">your city</span></h2>
  <div class="services-grid">
    <div class="service-tile" tabindex="0" onclick="location.href='window-washing.html'">
      <img src="https://i.ibb.co/C57mWGkV/Chat-GPT-Image-Apr-18-2025-01-54-07-PM.png" alt="Window Washing" loading="lazy" decoding="async">
      <h3>Window Washing</h3>
    </div>
    <div class="service-tile" tabindex="0" onclick="location.href='power-washing.html'">
      <img src="https://i.ibb.co/Df1F32pW/Chat-GPT-Image-Apr-18-2025-10-08-22-AM.png" alt="Power Washing" loading="lazy" decoding="async">
      <h3>Power Washing</h3>
    </div>
    <div class="service-tile" tabindex="0" onclick="location.href='house-cleaning.html'">
      <img src="https://i.ibb.co/ch0GNqXB/Chat-GPT-Image-Apr-18-2025-10-13-50-AM.png" alt="House Cleaning" loading="lazy" decoding="async">
      <h3>House Cleaning</h3>
    </div>
    <div class="service-tile" tabindex="0" onclick="location.href='handyman.html'">
      <img src="https://i.ibb.co/mC7W236y/Chat-GPT-Image-Apr-18-2025-02-26-44-PM.png" alt="Handyman" loading="lazy" decoding="async">
      <h3>Handyman</h3>
    </div>
    <div class="service-tile" tabindex="0" onclick="location.href='pool-cleaning.html'">
      <img src="https://i.postimg.cc/YSrtcHsQ/Chat-GPT-Image-Apr-25-2025-07-45-00-AM.png" alt="Pool Cleaning" loading="lazy" decoding="async">
      <h3>Pool Cleaning</h3>
    </div>
    <div class="service-tile" tabindex="0" onclick="location.href='junk-removal.html'">
      <img src="https://i.postimg.cc/WbhYtfQg/Chat-GPT-Image-Apr-25-2025-07-42-56-AM.png" alt="Junk Removal" loading="lazy" decoding="async">
      <h3>Junk Removal</h3>
    </div>
    <div class="service-tile" tabindex="0" onclick="location.href='fence-painting.html'">
      <img src="https://i.ibb.co/tMS54rt8/Chat-GPT-Image-Apr-18-2025-02-32-26-PM.png" alt="Fence Painting" loading="lazy" decoding="async">
      <h3>Fence Painting</h3>
    </div>
    <div class="service-tile" tabindex="0" onclick="location.href='gutter-cleaning.html'">
      <img src="https://i.postimg.cc/rsmQCZpX/GUTTER-CLEANING.png" alt="Gutter Cleaning" loading="lazy" decoding="async">
      <h3>Gutter Cleaning</h3>
    </div>
    <div class="service-tile" tabindex="0" onclick="location.href='adu-services.html'">
      <img src="https://i.postimg.cc/X70ymZ4h/Chat-GPT-Image-Apr-25-2025-07-39-34-AM.png" alt="ADU Services" loading="lazy" decoding="async">
      <h3>ADU Services</h3>
    </div>
    <div class="service-tile" tabindex="0" onclick="location.href='floor-installation.html'">
      <img src="https://i.postimg.cc/FK2jKTXF/Chat-GPT-Image-Apr-25-2025-07-40-58-AM.png" alt="Floor Installation" loading="lazy" decoding="async">
      <h3>Floor Installation</h3>
    </div>
  </div>
</section>

<!-- PROCESS SECTION -->
<section class="process-section reveal">
  <h2 style="font-size:2.1rem;color:var(--primary);font-weight:bold;margin-bottom:2.2rem;">How Our System Works</h2>
  <div class="process-steps">
    <div class="process-step">
      <img src="https://i.postimg.cc/NjDkZLZj/Chat-GPT-Image-Apr-24-2025-12-15-29-PM.png" alt="Step 1: Tell us what you need" loading="lazy" decoding="async" />
      <h3>Step 1<br>Tell us what you need</h3>
      <p>Remodels, repairs, or anything else—just describe your project.</p>
    </div>
    <div class="process-step">
      <img src="https://i.postimg.cc/XYp85npH/Chat-GPT-Image-Apr-24-2025-12-18-44-PM.png" alt="Step 2: Match with local pros" loading="lazy" decoding="async" />
      <h3>Step 2<br>AI-matches you with local pros</h3>
      <p>Our platform instantly connects you with the best, available professionals.</p>
    </div>
    <div class="process-step">
      <img src="https://i.postimg.cc/B6HRdBpW/Chat-GPT-Image-Apr-24-2025-12-20-45-PM.png" alt="Step 3: Choose who to hire" loading="lazy" decoding="async" />
      <h3>Step 3<br><em>You choose who to hire</em></h3>
      <p>Compare, chat, and choose. Only you decide who gets the job done.</p>
    </div>
  </div>
</section>

<!-- TESTIMONIALS SECTION -->
<section class="testimonials reveal" aria-label="User Testimonials">
  <h2>Success Stories</h2>
  <blockquote>
    “One of our first users said they landed two jobs within a day. That’s what we’re here for — fast, real results.”
  </blockquote>
  <p class="disclaimer">*Feedback based on early user experience. Individual results may vary.</p>
</section>

<!-- CTA / FORM SECTION -->
<section class="cta-section reveal" id="contact" aria-label="Contact Form">
  <div class="cta-flex">
    <div class="cta-text">
      <h2>Find the Right Pro in Minutes.</h2>
      <p>Tell us what you need done – we’ll match you with ready-to-work professionals in your area.</p>
      <img src="https://i.postimg.cc/wTzDY31N/Chat-GPT-Image-Apr-24-2025-09-55-22-AM.png" alt="Worker illustration" loading="lazy" decoding="async" />
    </div>
    <form action="https://formspree.io/f/xvgkljww" method="POST" autocomplete="on" aria-label="Get matched form" class="cta-form">
      <label for="name">Your Name</label>
      <input type="text" id="name" name="name" placeholder="Your Name" required />

      <label for="email">Email Address</label>
      <input type="email" id="email" name="email" placeholder="Email Address" required />

      <label for="phone">Phone Number</label>
      <input type="tel" id="phone" name="phone" placeholder="Phone Number" required />

      <label for="address">Street Address</label>
      <input type="text" id="address" name="address" placeholder="Street Address" required />

      <label for="zip">ZIP Code</label>
      <input type="text" id="zip" name="zip" placeholder="ZIP Code" required />

      <label for="message">Tell us what you need or offer...</label>
      <textarea id="message" name="message" placeholder="Your message..." required></textarea>

      <button type="submit">Send Message</button>
    </form>
  </div>
</section>

<!-- FOOTER SECTION -->
<footer class="site-footer" aria-label="Footer">
  <div class="footer-flex">
    <div class="footer-col">
      <h4>Cold Looms</h4>
      <a href="#">About</a>
      <a href="#">Partner with Us</a>
      <a href="#">Careers</a>
      <a href="#">Blog</a>
    </div>
    <div class="footer-col">
      <h4>Customers</h4>
      <a href="#">How It Works</a>
      <a href="#">Sign Up</a>
      <a href="#">Services Near Me</a>
      <a href="#">Cost Estimates</a>
    </div>
    <div class="footer-col">
      <h4>Pros</h4>
      <a href="#">Sign Up as a Pro</a>
      <a href="#">Pro Resources</a>
      <a href="#">Pro Reviews</a>
    </div>
    <div class="footer-col">
      <h4>Support</h4>
      <a href="#">Help</a>
      <a href="https://coldlooms.github.io/LOL/privacy.html">Privacy Policy</a>
      <a href="https://coldlooms.github.io/LOL/terms.html">Terms of Service</a>
    </div>
  </div>
  <div class="footer-bottom">
    <p>© 2025 Cold Looms | Smart Outreach for Real Clients</p>
    <p>
      <a href="mailto:rentservicesllc@gmail.com">rentservicesllc@gmail.com</a>
    </p>
    <div class="footer-social" style="margin-top:1rem;">
      <a href="#" aria-label="Instagram"><img src="https://img.icons8.com/ios-filled/24/instagram-new.png" alt="Instagram" /></a>
      <a href="#" aria-label="Facebook"><img src="https://img.icons8.com/ios-filled/24/facebook--v1.png" alt="Facebook" /></a>
      <a href="#" aria-label="Twitter"><img src="https://img.icons8.com/ios-filled/24/twitter--v1.png" alt="Twitter" /></a>
      <a href="#" aria-label="Gmail"><img src="https://img.icons8.com/ios-filled/24/gmail.png" alt="Gmail" /></a>
    </div>
  </div>
</footer>

<!-- POPUP MODALS -->
<dialog id="lead-popup" class="popup-modal">
  <div class="popup-content">
    <button type="button" aria-label="Close popup" onclick="closeLeadPopup()">&times;</button>
    <h2>Get Matched Quickly!<br><span style="font-size:1rem;font-weight:normal;color:var(--primary);">Tell us what you need</span></h2>
    <form id="lead-form" action="https://formspree.io/f/xvgkljww" method="POST" autocomplete="on">
      <label for="popup-name">Full Name</label>
      <input type="text" id="popup-name" name="name" placeholder="Your Name" required />

      <label for="popup-email">Email Address</label>
      <input type="email" id="popup-email" name="email" placeholder="Email Address" required />

      <label for="popup-phone">Phone Number</label>
      <input type="tel" id="popup-phone" name="phone" placeholder="Phone Number" required />

      <label for="popup-service">Service Needed</label>
      <select id="popup-service" name="service" required>
        <option value="" disabled selected>Select a service</option>
        <option>Window Washing</option>
        <option>Power Washing</option>
        <option>House Cleaning</option>
        <option>Handyman</option>
        <option>Pool Cleaning</option>
        <option>Junk Removal</option>
        <option>Fence Painting</option>
        <option>Gutter Cleaning</option>
        <option>ADU Services</option>
        <option>Floor Installation</option>
        <option>Other</option>
      </select>

      <label for="popup-message">Briefly describe your project or needs</label>
      <textarea id="popup-message" name="message" placeholder="Your message..." required></textarea>

      <button type="submit">Get My Quote</button>
    </form>
    <div class="success-message" id="lead-success" style="display:none;"></div>
  </div>
</dialog>
<dialog id="login-dialog" aria-modal="true" aria-labelledby="modal-title">
  <button onclick="closeDialog()" aria-label="Close dialog" style="float:right;font-size:1.3rem;background:none;border:none;">&times;</button>
  <h2 id="modal-title" style="margin-top:0;font-size:1.2rem;color:var(--primary);font-family:var(--mono);">Sign In</h2>
  <p style="margin-bottom:1em;">Sign in functionality coming soon!</p>
  <button class="cta-btn" onclick="closeDialog()" style="width:100%;">Close</button>
</dialog>

<button id="scrollToTopBtn" aria-label="Scroll to top" title="Back to top">↑</button>
<script>
  // Mobile nav toggle
  function toggleMobileNav() {
    const navLinks = document.getElementById('main-nav-links');
    if (navLinks.classList.contains('show')) {
      navLinks.classList.remove('show');
      document.body.style.overflow = "";
    } else {
      navLinks.classList.add('show');
      document.body.style.overflow = "hidden";
    }
  }
  // Close nav if clicked outside (for better iOS UX)
  document.addEventListener('click', function(e) {
    const navLinks = document.getElementById('main-nav-links');
    if (navLinks && navLinks.classList.contains('show')) {
      if (!navLinks.contains(e.target) && !e.target.classList.contains('nav-mobile-toggle')) {
        navLinks.classList.remove('show');
        document.body.style.overflow = "";
      }
    }
  });
  // Animated scroll reveal
  function revealOnScroll() {
    document.querySelectorAll('.reveal').forEach(el => {
      const rect = el.getBoundingClientRect();
      if (rect.top <= window.innerHeight * 0.94) el.classList.add('visible');
    });
  }
  window.addEventListener('scroll', revealOnScroll);
  window.addEventListener('DOMContentLoaded', revealOnScroll);
  // Scroll to top and sticky nav
  window.addEventListener('scroll', () => {
    document.querySelector('.navbar').classList.toggle('scrolled', window.scrollY > 20);
    document.getElementById('scrollToTopBtn').style.display = window.scrollY > 120 ? 'flex' : 'none';
  });
  document.getElementById('scrollToTopBtn').onclick = () => window.scrollTo({top:0, behavior:'smooth'});
  // City detection
  fetch('https://ipapi.co/json/')
    .then(res => res.json())
    .then(data => {
      const citySpan = document.getElementById('user-city');
      if (citySpan && data.city && data.region) {
        citySpan.textContent = data.city + ', ' + data.region;
      } else if (citySpan && data.city) {
        citySpan.textContent = data.city;
      }
    }).catch(() => {
      const fallback = document.getElementById('user-city');
      if (fallback) fallback.textContent = "your area";
    });
  // Modal logic using <dialog>
  function openDialog(e) {
    e.preventDefault();
    const dialog = document.getElementById('login-dialog');
    dialog.showModal();
    setTimeout(() => dialog.querySelector('button[onclick="closeDialog()"]').focus(), 100);
  }
  function closeDialog() {
    document.getElementById('login-dialog').close();
  }
  // PWA: register service worker if supported
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('service-worker.js');
    });
  }
  // Popup logic for lead questionnaire
  function openLeadPopup() {
    const popup = document.getElementById('lead-popup');
    if (popup && typeof popup.showModal === "function") {
      popup.showModal();
    } else if (popup) {
      popup.setAttribute('open', 'true');
      popup.style.display = 'flex';
    }
  }
  function closeLeadPopup() {
    const popup = document.getElementById('lead-popup');
    if (popup && typeof popup.close === "function") {
      popup.close();
    } else if (popup) {
      popup.removeAttribute('open');
      popup.style.display = 'none';
    }
  }
  // On load, show popup after slight delay (0.7s)
  window.addEventListener('DOMContentLoaded', () => {
    setTimeout(openLeadPopup, 700);
  });
  // Lead form submission logic
  document.addEventListener('DOMContentLoaded', function() {
    var leadForm = document.getElementById('lead-form');
    var successMsg = document.getElementById('lead-success');
    if (leadForm) {
      leadForm.addEventListener('submit', function(e) {
        e.preventDefault();
        var data = new FormData(leadForm);
        fetch(leadForm.action, {
          method: "POST",
          body: data,
          headers: {
            'Accept': 'application/json'
          }
        }).then(function(response) {
          if (response.ok) {
            leadForm.style.display = 'none';
            successMsg.textContent = "Thank you! Your request has been received.";
            successMsg.style.display = "block";
            setTimeout(closeLeadPopup, 3500);
          } else {
            response.json().then(function(data){
              successMsg.textContent = data.error || "There was a problem submitting the form. Please try again.";
              successMsg.style.display = "block";
            });
          }
        }).catch(function(){
          successMsg.textContent = "There was a problem submitting the form. Please try again.";
          successMsg.style.display = "block";
        });
      });
    }
  });
</script>
</body>
</html>
